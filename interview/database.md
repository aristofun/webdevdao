# Вопросы по базам данных с собеседований

## Общие

1. Что такое реляционная база данных?

    <details>
      <summary>Ответ</summary>
      Реляционная база данных – это набор данных с предопределенными связями между ними. Эти данные организованны
      в виде набора таблиц, состоящих из столбцов и строк. В таблицах хранится информация об объектах, представленных
      в базе данных. В каждом столбце таблицы хранится определенный тип данных, в каждой ячейке – значение атрибута.
      Каждая строка таблицы представляет собой набор связанных значений, относящихся к одному объекту или сущности.
    </details>

1. Что такое таблица, кортеж? Что такое primary key?

    <details>
      <summary>Ответ</summary>
      Таблица — это набор элементов данных (значений), использующий модель вертикальных столбцов
      (имеющих уникальное имя) и горизонтальных строк. Таблица содержит определенное число столбцов, но может иметь
      любое количество строк.
      Каждая строка однозначно определяется одним или несколькими уникальными значениями,
      которые принимают её ячейки из определенного подмножества столбцов. Подмножество столбцов,
      которое уникально идентифицирует строку, называется первичным ключом(primary key).
      
      - Primary key не позволяет создавать одинаковых записей (строк) в таблице;
      - PK обеспечивают логическую связь между таблицами одной базы данных.
      
      По соглашению Rails предполагает, что для первичного ключа используется столбец _id_ в таблице,
      который автоматически создается для каждой вашей записи.
      
      **Кортеж** - это набор именованных значений заданного типа.
      
      ![Наглядный пример](http://citforum.ru/pictures/it/osbd/img00005.gif)
    </details>

1. Как реализованы связи между таблицами? Что такое foreign key?

    <details>
      <summary>Ответ</summary>
      Между двумя или более таблицами базы данных могут существовать отношения подчиненности. Отношения подчиненности
      определяют, что для каждой записи главной таблицы может существовать одна или несколько записей в подчиненной таблице.
      
      Существует три разновидности связей между таблицами базы данных:
      
      * «один-ко-многим»,
      
      * «один-к-одному»,
      
      * «многие-ко-многим».
      
      Внешний ключ **Foreign key**, кратко FK. Обеспечивает однозначную логическую связь, между таблицами одной БД.
      Для обеспечения ссылочной целостности в дочерней таблице создается внешний ключ. Во внешний ключ входят
      поля связи дочерней таблицы. Для связей типа "один-ко-многим" внешний ключ по составу полей должен совпадать
      с первичным ключом родительской таблицы.
      
      Например, есть две таблицы А и В. В таблице А (обувь), есть первичный ключ: размер,
      в таблице В (цвет) должна быть колонка с названием размер. В этой таблице «размер»
      это и будет внешний ключ для логической связи таблиц В и А.
      
      По соглашению Rails предполагает, что столбец, используемый для хранения внешнего ключа в этой модели, имеет имя модели с добавленным суффиксом _id_
    </details>

1. Как работает SELECT оператор?

    <details>
      <summary>Ответ</summary>
      SELECT - оператор запроса, возвращающий набор данных (выборку) из базы данных.
      
      Оператор SELECT состоит из нескольких предложений (разделов):
      
      Сам **SELECT** определяет список возвращаемых столбцов (как существующих, так и вычисляемых), их имена,
      ограничения на уникальность строк в возвращаемом наборе, ограничения на количество строк в возвращаемом наборе;
      
      **FROM** задаёт табличное выражение, которое определяет базовый набор данных для применения операций, определяемых
      в других предложениях оператора;
      
      **WHERE** задает ограничение на строки табличного выражения из предложения FROM;
      
      **GROUP BY** объединяет ряды, имеющие одинаковое свойство с применением агрегатных функций
      
      **HAVING** выбирает среди групп, определенных параметром GROUP BY
      
      **ORDER BY** задает критерии сортировки строк; отсортированные строки передаются в точку вызова.
      
      Синтаксис оператора SELECT:
      
      ```sql
      SELECT <column_list> 
      FROM <table_name> 
      [WHERE <условие>] 
      [GROUP BY <условие>] 
      [HAVING <условие>] 
      [ORDER BY <условие>] 
      ```
    </details>

1. Какие бывают виды JOIN? Как каждый работает?

    <details>
      <summary>Ответ</summary>
      INNER JOIN - оператор внутреннего соединения, соединяет две таблицы. Выбираются только совпадающие данные из
      объединяемых таблиц. 
      
      OUTER JOIN - существует два типа внешнего объединения: LEFT OUTER JOIN и RIGHT OUTER JOIN. 
      Работают они одинаково, разница заключается в том что LEFT - указывает что "внешней" таблицей будет находящаяся
      слева, а RIGHT - справа. Выбираются все данные из внешней таблицы + совпадения из второй таблицы.
      
      Cross/Full Join - FULL JOIN возвращает объединение объединений LEFT и RIGHT таблиц, комбинируя результат двух запросов.
      CROSS JOIN возвращает перекрестное объединение двух таблиц. Результатом будет выборка всех записей первой таблицы
      объединенная с каждой строкой второй таблицы. Важным моментом является то, что для кросса не нужно указывать
      условие объединения.
      
      ![Наглядный пример](https://zametkinapolyah.ru/wp-content/uploads/2016/07/type-join.png)
    </details>

1. Как работают INSERT, UPDATE, DELETE операторы?

    <details>
      <summary>Ответ</summary>
      INSERT — оператор, который позволяет добавить строки в таблицу, заполняя их значениями.
      Значения можно вставлять перечислением с помощью слова values и перечислив их в круглых скобках через запятую или
      оператором SELECT.
      
      Синтаксис:

      ```sql
      INSERT INTO table_name (column1, column2, column3, ...)
      VALUES (value1, value2, value3, ...);
      ```
      
      UPDATE — оператор, позволяющий обновить значения в заданных столбцах таблицы.
      
      Синтаксис:

      ```sql
      UPDATE table_name
      SET column1 = value1, column2 = value2, ...
      WHERE condition;
      ```
      
      DELETE — операция удаления записей из таблицы. Критерий отбора записей для удаления определяется выражением WHERE.
      В случае, если критерий отбора не определён, выполняется удаление всех записей.
      
      Синтаксис:

      ```sql
      DELETE FROM table_name WHERE condition;
      ```

    </details>

1. Что такое индексы? Для чего используются? Плюсы, минусы?

    <details>
      <summary>Ответ</summary>
      Индекс — объект базы данных, создаваемый с целью повышения производительности поиска данных. Таблицы в базе
      данных могут иметь большое количество строк, которые хранятся в произвольном порядке, и их поиск по заданному
      критерию путём последовательного просмотра таблицы строка за строкой может занимать много времени.
      Индекс формируется из значений одного или нескольких столбцов таблицы и указателей на соответствующие строки
      таблицы и, таким образом, позволяет искать строки, удовлетворяющие критерию поиска.
      
      Ускорение работы с использованием индексов достигается в первую очередь за счёт того, что индекс имеет структуру,
      оптимизированную под поиск.
      
      Для оптимальной производительности запросов индексы обычно создаются на тех столбцах таблицы,
      которые часто используются в запросах.  Однако увеличение числа индексов замедляет операции добавления,
      обновления, удаления строк таблицы, поскольку при этом приходится обновлять сами индексы. Кроме того, индексы
      занимают дополнительный объем памяти.
    </details>

1. Какие виды индексов бывают?
1. Что такое полнотекстовый поиск?
1. Что такое транзакции?
1. Что такое блокировочные и версионные СУБД?
1. Что такое репликация, для чего нужна?
1. Что такое шардинг (партиционирование)?
1. Типичные bottle necks?
1. Объяснить разницу между SQL Injection and CSS Injection?
1. Что такое BETWEEN?
1. Чем Like отличается от Ilike?
1. Чем Having отличается от Where?

1. Что такое нормализация и денормализация базы данных?

    <details>
      <summary>Ответ</summary>
      Нормализация — процесс преобразования отношений базы данных к виду, отвечающему нормальным формам.

      Нормальные формы — это рекомендации по проектированию баз данных.

      Для нормализации необходимо упорядочить данные в группы и найти логические связи между этими группами данных.

      Денормализация — намеренное приведение структуры базы данных в состояние, не соответствующее критериям нормализации, обычно проводимое с целью ускорения операций чтения из базы за счет добавления избыточных данных.

      https://oracle-patches.com/db/3632-нормализация-и-денормализация-базы-данных-нормальные-формы
    </details>

1. Основная причина, по которой Redis работает быстрее PostgreSQL?

    <details>
      <summary>Ответ</summary>
      Причина в месте хранения данных. В Redis данные хранятся в оперативной памяти, в PostgreSQL на жёстком диске.

      https://ru.wikipedia.org/wiki/Redis
    </details>

Где искать ответы:

* https://www.pgexercises.com — тренажер для написания запросов
* https://sqlzoo.net/
* https://sqlbolt.com/
* http://sql-tutorial.ru/sqlbook/ru

## PostgreSQL

Вопросы:

1. pgBouncer — что это и зачем нужно?
1. Системы репликации, что это и зачем нужно?
1. PgQ (другие очереди)?
1. Что такое синхронные и асинхронные операции?

Где искать ответы:

* https://www.codecademy.com/learn/learn-sql
